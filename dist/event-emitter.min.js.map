{"version":3,"sources":["event-emitter.min.js"],"names":["root","factory","define","amd","exports","module","EventEmitter","this","types","events","_events","Array","isArray","length","TypeError","i","l","clone","listeners","cloned","indexOf","listener","fn","splice","index","j","k","pop","proto","prototype","on","addListener","type","scope","once","_getListeners","Error","that","fired","push","wrapper","data","removeListener","call","emit","removeAllListeners","event","listenerCount"],"mappings":"CAAC,SAASA,EAAMC,GACQ,kBAAXC,SAAyBA,OAAOC,IACzCD,UAAWD,GACiB,gBAAZG,SAChBC,OAAOD,QAAUH,IAEjBD,EAAKM,aAAeL,KAEtBM,KAAM,WACR,YAUA,SAASD,GAAaE,GACpB,GAAIC,GAASF,KAAKG,UAElB,IAAqB,gBAAVF,GACTC,EAAOD,UAEJ,CAAA,IAAIG,MAAMC,QAAQJ,KAAUA,EAAMK,OAMrC,KAAM,IAAIC,UALV,KAAK,GAAIC,GAAI,EAAGC,EAAIR,EAAMK,OAAYG,EAAJD,IAASA,EACzCN,EAAOD,EAAMO,QA4JnB,QAASE,GAAMC,GAIb,IAHA,GAAIH,GAAIG,EAAUL,OACdM,EAAS,GAAIR,OAAMI,GAEhBA,KACLI,EAAOJ,GAAKG,EAAUH,EAGxB,OAAOI,GAST,QAASC,GAAQF,EAAWG,GAG1B,IAFA,GAAIN,GAAIG,EAAUL,OAEXE,KACL,GAAIM,IAAaH,EAAUH,GAAGO,GAC5B,MAAOP,EAIX,OAAO,GAQT,QAASQ,GAAOL,EAAWM,GACzB,IAAK,GAAIT,GAAIS,EAAOC,EAAIV,EAAI,EAAGW,EAAIR,EAAUL,OAAYa,EAAJD,IAASV,IAAKU,EACjEP,EAAUH,GAAKG,EAAUO,EAG3BP,GAAUS,MA1LZ,GAAIC,GAAQtB,EAAauB,SA6LzB,OAnLAD,GAAME,GACNF,EAAMG,YAAc,SAASC,EAAMX,EAAUY,EAAOC,GAClD,GAAwB,kBAAbb,GACT,KAAM,IAAIP,UAGZ,IAAII,GAAYX,KAAK4B,cAAcH,EAEnC,IAAId,EAAUL,QAA2C,KAAjCO,EAAQF,EAAWG,GACzC,KAAM,IAAIe,MAGZ,IAAIH,KAAU,GAAQC,KAAS,EAAM,CACnC,GAAIG,GAAO9B,KACP+B,GAAQ,CAEZpB,GAAUqB,MACRjB,GAAI,QAASkB,GAAQC,GACnBJ,EAAKK,eAAeV,EAAMQ,GACrBF,IACHA,GAAQ,EACRjB,EAASsB,KAAKV,MAAaQ,KAG/BR,eAIFf,GAAUqB,MACRjB,GAAID,EACJY,MAAOA,OAIX,OAAO1B,OASTqB,EAAMgB,KAAO,SAASZ,EAAMS,GAC1B,GAAIvB,GAAYX,KAAK4B,cAAcH,EAEnC,IAAId,EAAUL,OAAQ,CACpBK,EAAYD,EAAMC,EAElB,KAAK,GAAiCG,GAA7BN,EAAI,EAAGC,EAAIE,EAAUL,OAAsBG,EAAJD,IAASA,EACvDM,EAAWH,EAAUH,GACrBM,EAASC,GAAGqB,KAAKtB,EAASY,MAAOQ,GAIrC,MAAOlC,OASTqB,EAAMc,eAAiB,SAASV,EAAMX,GACpC,GACIG,GADAN,EAAYX,KAAK4B,cAAcH,EAUnC,OAPId,GAAUL,SACZW,EAAQJ,EAAQF,EAAWG,GACb,KAAVG,GACFD,EAAOL,EAAWM,IAIfjB,MAQTqB,EAAMiB,mBAAqB,SAASb,GAClC,GAAIA,EAAM,CACR,GAAId,GAAYX,KAAK4B,cAAcH,EACnCd,GAAUL,OAAS,MAEhB,CACH,GAAIJ,GAASF,KAAKG,OAClB,KAAK,GAAIoC,KAASrC,GAChBA,EAAOqC,GAAOjC,OAAS,EAI3B,MAAON,OAQTqB,EAAMV,UAAY,SAASc,GACzB,GAAId,GAAYX,KAAK4B,cAAcH,EACnC,OAAOd,GAAUL,OAASI,EAAMC,OAQlCU,EAAMmB,cAAgB,SAASf,GAC7B,GAAId,GAAYX,KAAK4B,cAAcH,EACnC,OAAOd,GAAUL,QASnBe,EAAMO,cAAgB,SAASH,GAC7B,GAAId,GAAYX,KAAKG,QAAQsB,EAC7B,KAAKd,EACH,KAAM,IAAIkB,MAEZ,OAAOlB,IAkDFZ","file":"event-emitter.min.js","sourcesContent":["(function(root, factory) {\n  if (typeof define === 'function' && define.amd) {\n    define([], factory);\n  } else if (typeof exports === 'object') {\n    module.exports = factory();\n  } else {\n    root.EventEmitter = factory();\n  }\n}(this, function() {\n'use strict';\n\n\n/**\n * @name EventEmitter\n * @constructor\n *\n * @param {string|string[]} types\n *\n */\nfunction EventEmitter(types) {\n  var events = this._events = {};\n\n  if (typeof types === 'string') {\n    events[types] = [];\n  }\n  else if (Array.isArray(types) && types.length) {\n    for (var i = 0, l = types.length; i < l; ++i) {\n      events[types[i]] = [];\n    }\n  }\n  else {\n    throw new TypeError();\n  }\n}\n\n\nvar proto = EventEmitter.prototype;\n\n\n/**\n * @param {string} type\n * @param {Function} listener\n * @param {boolean|Object} [scope]\n * @param {boolean} [once]\n * @returns {EventEmitter}\n */\nproto.on =\nproto.addListener = function(type, listener, scope, once) {\n  if (typeof listener !== 'function') {\n    throw new TypeError();\n  }\n\n  var listeners = this._getListeners(type);\n\n  if (listeners.length && indexOf(listeners, listener) !== -1) {\n    throw new Error();\n  }\n\n  if (scope === true || once === true) {\n    var that = this,\n        fired = false;\n\n    listeners.push({\n      fn: function wrapper(data) {\n        that.removeListener(type, wrapper);\n        if (!fired) {\n          fired = true;\n          listener.call(scope || {}, data);\n        }\n      },\n      scope: {}\n    });\n  }\n  else {\n    listeners.push({\n      fn: listener,\n      scope: scope || {}\n    });\n  }\n\n  return this;\n};\n\n\n/**\n * @param {string} type\n * @param {*} data\n * @returns {EventEmitter}\n */\nproto.emit = function(type, data) {\n  var listeners = this._getListeners(type);\n\n  if (listeners.length) {\n    listeners = clone(listeners);\n\n    for (var i = 0, l = listeners.length, listener; i < l; ++i) {\n      listener = listeners[i];\n      listener.fn.call(listener.scope, data);\n    }\n  }\n\n  return this;\n};\n\n\n/**\n * @param {string} type\n * @param {Function} listener\n * @returns {EventEmitter}\n */\nproto.removeListener = function(type, listener) {\n  var listeners = this._getListeners(type),\n      index;\n\n  if (listeners.length) {\n    index = indexOf(listeners, listener);\n    if (index !== -1) {\n      splice(listeners, index);\n    }\n  }\n\n  return this;\n};\n\n\n/**\n * @param {string} [type]\n * @returns {EventEmitter}\n */\nproto.removeAllListeners = function(type) {\n  if (type) {\n    var listeners = this._getListeners(type);\n    listeners.length = 0;\n  }\n  else {\n    var events = this._events;\n    for (var event in events) {\n      events[event].length = 0;\n    }\n  }\n\n  return this;\n};\n\n\n/**\n * @param {string} type\n * @returns {Array}\n */\nproto.listeners = function(type) {\n  var listeners = this._getListeners(type);\n  return listeners.length ? clone(listeners) : [];\n};\n\n\n/**\n * @param {string} type\n * @returns {number}\n */\nproto.listenerCount = function(type) {\n  var listeners = this._getListeners(type);\n  return listeners.length;\n};\n\n\n/**\n * @param {string} type\n * @returns {Array}\n * @throws {Error}\n */\nproto._getListeners = function(type) {\n  var listeners = this._events[type];\n  if (!listeners) {\n    throw new Error();\n  }\n  return listeners;\n};\n\n\n/**\n * @param {Array} listeners\n * @returns {Array}\n */\nfunction clone(listeners) {\n  var i = listeners.length,\n      cloned = new Array(i);\n\n  while (i--) {\n    cloned[i] = listeners[i];\n  }\n\n  return cloned;\n}\n\n\n/**\n * @param {Array} listeners\n * @param {Object} listener\n * @returns {number}\n */\nfunction indexOf(listeners, listener) {\n  var i = listeners.length;\n\n  while (i--) {\n    if (listener === listeners[i].fn) {\n      return i;\n    }\n  }\n\n  return -1;\n}\n\n\n/**\n * @param {Array} listeners\n * @param {number} index\n */\nfunction splice(listeners, index) {\n  for (var i = index, j = i + 1, k = listeners.length; j < k; ++i, ++j) {\n    listeners[i] = listeners[j];\n  }\n\n  listeners.pop();\n}\n\nreturn EventEmitter;\n}));\n"],"sourceRoot":"/source/"}